import{j as e,B as x,O as q,i as Z,g as $,r as g,q as Q,c as v,o as ee,u as Y,C as A,I as oe,d as ne,T as c,G as P,P as T,a as te,b as E,e as S,f as J,h as U,s as z,k as re,l as k,m as se,n as F,p as ae,t as O,v as ie,w as y,x as ce,y as le,z as de,H as me,R as pe,A as I,N as ue,D as ge}from"./vendor-CLfmhUfP.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))d(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&d(i)}).observe(document,{childList:!0,subtree:!0});function n(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function d(t){if(t.ep)return;t.ep=!0;const s=n(t);fetch(t.href,s)}})();const xe=()=>e.jsx(x,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh",bgcolor:"#1a1a1a"},children:e.jsx(x,{component:"main",sx:{flexGrow:1},children:e.jsx(q,{})})});var _={VITE_FIREBASE_API_KEY:"AIzaSyDgVwDyD1mDBl-J_C6kGvMPsgS7DkNvibg",VITE_FIREBASE_AUTH_DOMAIN:"fridge6sal-5b0f6.firebaseapp.com",VITE_FIREBASE_PROJECT_ID:"fridge6sal-5b0f6",VITE_FIREBASE_STORAGE_BUCKET:"fridge6sal-5b0f6.firebasestorage.app",VITE_FIREBASE_MESSAGING_SENDER_ID:"757651497587",VITE_FIREBASE_APP_ID:"1:757651497587:web:43bbd10fad974cad7ec006",VITE_FIREBASE_TYPE:"service_account",VITE_FIREBASE_PRIVATE_KEY_ID:"3a91321bc8f2561a5fe219df68882c5a81ce6a11",VITE_FIREBASE_PRIVATE_KEY:`-----BEGIN PRIVATE KEY-----
MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQCECpk0HTTDq5Ht
VLd+lEnBW8HGpkMrcjGt6/4I3ds2cL8mZ2whvMhakPfBZ55b4s0TBiK7gIIJNyEU
zoVoOP0mXLIi3ITyZiVmJ1vcB9ubZJV6cgufg7iXtdceXX5jada1yG2FtNnchu5p
g2Lqv4CgPbbEBO9d7kvUiqIoyDzCaKCumQXZ31ATiSWPJCRtPAo8hA6rfr1CS9Ea
KFVrCEgHunw4QGby3GteBsT3CljSYPXzZDy6MRPIreEgP2RoYCZjlkAoTtVb8SMI
a/TkhZigNeG00+TyfgRa62QVw0qJ3u3p82WUJn/CQZ8qh4OJaG67LRY3dhkuQ4fX
YGuHLsM/AgMBAAECggEAHUaGSkYxdTK8k4zFdFSnd64C7Crf2KmkdyXMOKYL3Omp
j/e9Q0uqdl4O+HwjYccK5e1l1QG8kxN8i7LwZDfCdPd3bYBMH7xjDV+rn8DEQZNP
CwtvJUpcqpJgJDTheWQ1fS93jP4Ykar/ADjnvRmBiMW2GIbplX9oo7KrGnSu+AFO
G12xg231PA/slCexcFEmhnSveoYpCnhP8qQRZTYqvDL0mVD3yFduqmJQ3ixMI91l
VOIL2VmlEp86QSKsMp8YjTzPXAqlga4dYqWe67UyheATWSqlrOeqtgA7x8+s+i7P
eRSbbyBaFKm4C8q/zqCUjH27lpWAb+a+QtBjcf67rQKBgQC5HgtLMn5j/3h2rIFj
5gEtLSipWjrop8Z+4xfjFNHOd3orGJSmVSsGJoRD5JGfo6Qvw1ACe9h8/yJ43jq2
LQHaIMsTwnYXP/zE2shmIkj9D0Rgb5XxJqHPmaVE8Y0BCvZQsLr6+nD2yHKSBuKh
tNU5JmmdvZJwjXuCPuFg/i8lGwKBgQC2mdVFA/iaOWmrdQmYnT4AmAacGOb0mIYS
RV6wIt0boEWEjhUbY0s+1IgTbQ+d828nc9cmddEZKBh+yzq8ZEW+dubSxvChxgUj
oPDG0pWTOQS47j5sB7z1U6nuntE5eXxrJ55UAEbYei/MKdcnWEW9RkmazumoRMI9
gXm+ChMQrQKBgGh0X4MK9u6OFPdB17D68+b9+Fe3Jk5pfUPT+IKWGN0b5b+zmw1Q
OXq6+R8mNlWSDO82kksUfs/pVxZEr3RkaQsgPfbkX6Y24PZjTXj0F6NTng2caUst
tVhjJjKE6j+QY/ScBKXh8yQNbzie0frVAwvAdRAhDCSecPbJbHtCcm/JAoGATqQo
DqYsLjelw9sO+/RUnKrcxeOPrC34J+xKYG9TbK904SbT/kygPnoH9N3WiP8rkwE3
2u+I013KVukt7a79vo600HgvcGy5D+Qjbm2JT7ORzheFOL+IaNvUZtltYGRq6jdQ
3/qSiG7vIO2wJNjGiEK6NnsAdKDQSu71QJxUI60CgYEAid01C8/vocwQycGe49Hj
m/LuGABK2M0/zynZc7t9apIYxV0Ad9x6xNOQX6UQvt8RHyB1NsPxrIgmiV8KCmR2
cEuNPbNKeV4TmuUhhdogXinJN/Fi12pKgxyBy+Mz6xKL+3tGfZxlRDbesGi+mW9G
tBLa0XCbwCK/l2MbyRpttew=
-----END PRIVATE KEY-----
`,VITE_FIREBASE_CLIENT_EMAIL:"firebase-adminsdk-fbsvc@fridge6sal-5b0f6.iam.gserviceaccount.com",VITE_FIREBASE_CLIENT_ID:"101941863173090067079",VITE_FIREBASE_AUTH_URI:"https://accounts.google.com/o/oauth2/auth",VITE_FIREBASE_TOKEN_URI:"https://oauth2.googleapis.com/token",VITE_FIREBASE_AUTH_PROVIDER_X509_CERT_URL:"https://www.googleapis.com/oauth2/v1/certs",VITE_FIREBASE_CLIENT_X509_CERT_URL:"https://www.googleapis.com/robot/v1/metadata/x509/firebase-adminsdk-fbsvc%40fridge6sal-5b0f6.iam.gserviceaccount.com",TERM_PROGRAM:"vscode",NODE:"/usr/local/Cellar/node/23.2.0_1/bin/node",INIT_CWD:"/Users/EvodeMicomyiza_1/finalbox/dorm-sales-app",SHELL:"/bin/zsh",TERM:"xterm-256color",TMPDIR:"/var/folders/1m/6dy8m9n96gjdtrrkc9k67g640000gp/T/",npm_config_global_prefix:"/usr/local",TERM_PROGRAM_VERSION:"1.94.0",MallocNanoZone:"0",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",ZDOTDIR:"/Users/EvodeMicomyiza_1",COLOR:"1",npm_config_noproxy:"",npm_config_local_prefix:"/Users/EvodeMicomyiza_1/finalbox/dorm-sales-app",USER:"Evode_Micomyiza",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/usr/local/etc/npmrc",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.4YOeJOppOQ/Listeners",__CF_USER_TEXT_ENCODING:"0x1F6:0x0:0x9",npm_execpath:"/usr/local/lib/node_modules/npm/bin/npm-cli.js",PAGER:"cat",PATH:"/Users/EvodeMicomyiza_1/finalbox/dorm-sales-app/node_modules/.bin:/Users/EvodeMicomyiza_1/finalbox/node_modules/.bin:/Users/EvodeMicomyiza_1/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/usr/local/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/Users/EvodeMicomyiza_1/finalbox/dorm-sales-app/node_modules/.bin:/Users/EvodeMicomyiza_1/finalbox/node_modules/.bin:/Users/EvodeMicomyiza_1/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/usr/local/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/Library/Frameworks/Python.framework/Versions/3.9/bin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/Library/TeX/texbin:/Applications/VMware Fusion.app/Contents/Public:/Library/Frameworks/Python.framework/Versions/3.9/bin",_:"/Users/EvodeMicomyiza_1/finalbox/dorm-sales-app/node_modules/.bin/vite",npm_package_json:"/Users/EvodeMicomyiza_1/finalbox/dorm-sales-app/package.json",__CFBundleIdentifier:"com.exafunction.windsurf",USER_ZDOTDIR:"/Users/EvodeMicomyiza_1",npm_config_init_module:"/Users/EvodeMicomyiza_1/.npm-init.js",npm_config_userconfig:"/Users/EvodeMicomyiza_1/.npmrc",PWD:"/Users/EvodeMicomyiza_1/finalbox/dorm-sales-app",npm_command:"run-script",EDITOR:"vi",npm_lifecycle_event:"build",LANG:"en_US.UTF-8",npm_package_name:"dorm-sales-app",XPC_FLAGS:"0x0",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"",npm_config_npm_version:"10.9.0",npm_config_node_gyp:"/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",XPC_SERVICE_NAME:"0",npm_package_version:"1.1.0",VSCODE_INJECTION:"1",HOME:"/Users/EvodeMicomyiza_1",SHLVL:"3",VSCODE_GIT_ASKPASS_MAIN:"/Applications/Windsurf.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",LOGNAME:"Evode_Micomyiza",npm_config_cache:"/Users/EvodeMicomyiza_1/.npm",npm_lifecycle_script:"vite build",VSCODE_GIT_IPC_HANDLE:"/var/folders/1m/6dy8m9n96gjdtrrkc9k67g640000gp/T/vscode-git-6ba4d4ea92.sock",npm_config_user_agent:"npm/10.9.0 node/v23.2.0 darwin x64 workspaces/false",GIT_ASKPASS:"/Applications/Windsurf.app/Contents/Resources/app/extensions/git/dist/askpass.sh",VSCODE_GIT_ASKPASS_NODE:"/Applications/Windsurf.app/Contents/Frameworks/Windsurf Helper (Plugin).app/Contents/MacOS/Windsurf Helper (Plugin)",COLORTERM:"truecolor",npm_config_prefix:"/usr/local",npm_node_execpath:"/usr/local/Cellar/node/23.2.0_1/bin/node",NODE_ENV:"production"};const fe={apiKey:_.VITE_FIREBASE_API_KEY,authDomain:_.VITE_FIREBASE_AUTH_DOMAIN,projectId:_.VITE_FIREBASE_PROJECT_ID,storageBucket:_.VITE_FIREBASE_STORAGE_BUCKET,messagingSenderId:_.VITE_FIREBASE_MESSAGING_SENDER_ID,appId:_.VITE_FIREBASE_APP_ID},he=Z(fe),f=$(he),be=(o,a=[])=>{const[n,d]=g.useState([]);return g.useEffect(()=>{const t=Q(v(f,o),...a),s=ee(t,i=>{const u=[];i.forEach(h=>{u.push({id:h.id,...h.data()})}),d(u)});return()=>s()},[o]),{data:n}},Ee=()=>{const o=Y(),{data:a}=be("rooms"),n=Math.max(...a.map(i=>i.balance||0)),d=g.useMemo(()=>a.reduce((i,u)=>(i[u.id]=u,i),{}),[a]),t=i=>{o(`/room/${i}`)},s=({roomId:i})=>{const u=d[i]||{occupantName:"",balance:0},h=u.balance===n&&u.balance>0;return e.jsxs(T,{elevation:3,sx:{p:3,height:"100%",cursor:"pointer",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"#fff",borderRadius:"12px",transition:"all 0.2s ease-in-out",position:"relative","&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 16px rgba(0,0,0,0.1)"}},onClick:()=>t(i),children:[h&&e.jsx(te,{sx:{position:"absolute",top:-10,right:-10,color:"#ffd700",fontSize:"2rem",filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.2))",transform:"rotate(12deg)"}}),e.jsx(c,{variant:"h4",component:"div",sx:{color:"#2c3e50",fontWeight:"bold",mb:1},children:i}),e.jsx(c,{variant:"body1",sx:{color:"#666",textAlign:"center",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",px:2},children:u.occupantName||"Tomt værelse"})]})};return e.jsxs(A,{maxWidth:!1,sx:{py:3,px:{xs:2,sm:3},minHeight:"100vh",bgcolor:"#f5f6fa",position:"relative",overflow:"hidden"},children:[e.jsx(oe,{onClick:()=>o("/admin"),sx:{position:"absolute",top:16,right:16,color:"#2c3e50",opacity:.7,"&:hover":{opacity:1}},children:e.jsx(ne,{})}),e.jsx(c,{variant:"h3",component:"h1",align:"center",sx:{color:"#2c3e50",mb:1,fontWeight:"bold"},children:"DormDrinks 6.sal"}),e.jsx(c,{variant:"subtitle1",component:"div",align:"center",sx:{color:"#666",mb:4},children:"Beer, Soda & Beyond"}),e.jsx(P,{container:!0,spacing:2,sx:{width:"auto",mx:-1,mt:0},children:Array.from({length:28},(i,u)=>u+601).map(i=>e.jsx(P,{item:!0,xs:6,sm:4,md:3,sx:{height:"100%"},children:e.jsx(s,{roomId:i.toString()})},i))})]})},V=async o=>{try{console.log("Fetching room:",o);const a=E(f,"rooms",o),n=await S(a),d=n.exists()?{id:n.id,...n.data()}:null;return console.log("Room data:",d),d}catch(a){throw console.error("Error fetching room:",a),a}},_e=async(o,a)=>{try{console.log("Updating room:",o,"with data:",a);const n=E(f,"rooms",o);await J(n,a),console.log("Room updated successfully")}catch(n){throw console.error("Error updating room:",n),n}},ye=async()=>{try{console.log("Fetching products...");const o=v(f,"products"),n=(await U(o)).docs.map(d=>({id:d.id,...d.data()}));return console.log("Products fetched:",n),n}catch(o){throw console.error("Error fetching products:",o),o}},Ie=async o=>{var a;try{console.log("Adding purchase:",o);const n=v(f,"purchases"),d={...o,timestamp:z()};console.log("Creating purchase record..."),await re(n,d),console.log("Updating room balance...");const t=E(f,"rooms",o.roomId),i=((a=(await S(t)).data())==null?void 0:a.balance)||0;await J(t,{balance:i+o.amount,lastPurchase:{productName:o.productName,amount:o.amount,timestamp:z()}}),console.log("Purchase completed successfully")}catch(n){throw console.error("Error adding purchase:",n),n}},Se=async()=>{try{console.log("Initializing default data...");const o=v(f,"products");if((await U(o)).empty){console.log("Products collection is empty, initializing...");const t=[{id:"beer",name:"Øl",price:7},{id:"soda",name:"Sodavand",price:5},{id:"snacks",name:"Snacks",price:10},{id:"water",name:"Vand",price:3}];for(const s of t)await k(E(o,s.id),{name:s.name,price:s.price});console.log("Default products initialized")}for(let t=601;t<=628;t++){const s=E(f,"rooms",t.toString());(await S(s)).exists()||await k(s,{occupantName:"",balance:0,lastPurchase:null})}const n=E(f,"adminConfig","general");(await S(n)).exists()||await k(n,{mobilePayPhoneNumber:"",adminPassword:"admin123"})}catch(o){throw console.error("Error initializing default data:",o),o}},M=[{id:"beer",name:"Øl",price:7},{id:"soda",name:"Sodavand",price:5},{id:"snacks",name:"Snacks",price:10},{id:"water",name:"Vand",price:3}],ve=()=>{var j,R;const{roomId:o}=se(),a=Y(),[n,d]=g.useState({occupantName:"",balance:0}),[t,s]=g.useState(M),[i,u]=g.useState(!0);g.useEffect(()=>{(async()=>{try{console.log("Loading data for room:",o),await Se();const[m,r]=await Promise.all([V(o),ye()]);console.log("Room data loaded:",m),console.log("Products loaded:",r),d(m||{occupantName:"",balance:0}),s(r.length>0?r:M)}catch(m){console.error("Error loading data:",m),s(M)}finally{u(!1)}})()},[o]);const h=async l=>{try{console.log("Updating occupant name to:",l),await _e(o,{occupantName:l}),d(m=>({...m,occupantName:l})),console.log("Occupant name updated successfully")}catch(m){console.error("Error updating occupant name:",m)}},C=async l=>{try{console.log("Starting purchase for product:",l);const m=t.find(b=>b.id===l);if(!m){console.error("Product not found:",l);return}console.log("Product found:",m),console.log("Current room state:",n);const r=(n.balance||0)+m.price,p=new Date;console.log("New balance will be:",r),d(b=>({...b,balance:r,lastPurchase:{productName:m.name,amount:m.price,timestamp:p}})),console.log("Making purchase in Firebase..."),await Ie({roomId:o,productId:l,productName:m.name,amount:m.price}),console.log("Purchase completed successfully")}catch(m){console.error("Error making purchase:",m);const r=await V(o);d(r||{occupantName:"",balance:0})}},D=l=>l?(l instanceof Date?l:l.toDate()).toLocaleString("da-DK",{hour:"2-digit",minute:"2-digit"}):"";return e.jsxs(x,{sx:{bgcolor:"#f5f6fa",minHeight:"100vh",display:"flex",flexDirection:"column"},children:[e.jsxs(A,{maxWidth:"sm",sx:{py:4,flex:1},children:[e.jsxs(x,{sx:{display:"flex",flexDirection:"column",alignItems:"center",mb:6},children:[e.jsxs(c,{variant:"h3",component:"h1",sx:{color:"#2c3e50",fontWeight:"bold",mb:2},children:["Værelse ",o]}),e.jsx(x,{sx:{position:"relative",width:"100%",maxWidth:300},children:e.jsx(F,{variant:"outlined",placeholder:"Klik for at tilføje beboer",value:n.occupantName,onChange:l=>h(l.target.value),sx:{width:"100%","& .MuiOutlinedInput-root":{fontSize:"1.2rem",textAlign:"center","& fieldset":{borderColor:"rgba(0,0,0,0.2)"},"&:hover fieldset":{borderColor:"#e74c3c"},"&.Mui-focused fieldset":{borderColor:"#e74c3c"},"& input":{textAlign:"center",color:"#2c3e50","&::placeholder":{color:"#666",opacity:.7}}}},InputProps:{endAdornment:e.jsx(ae,{sx:{color:"#666",opacity:.7,mr:1,transition:"all 0.2s",".MuiOutlinedInput-root:hover &":{color:"#e74c3c",opacity:1}}})}})})]}),e.jsxs(T,{elevation:3,sx:{p:4,mb:4,textAlign:"center",bgcolor:n.balance>0?"#fff3e0":"white",borderRadius:3},children:[e.jsx(c,{variant:"h6",sx:{color:"#666",mb:1},children:"SALDO"}),e.jsxs(c,{variant:"h2",sx:{color:n.balance>0?"#e74c3c":"#2c3e50",fontWeight:"bold"},children:[(j=n.balance)==null?void 0:j.toFixed(2)," kr"]})]}),n.lastPurchase&&e.jsxs(T,{elevation:3,sx:{bgcolor:"white",p:3,mb:4,borderRadius:3},children:[e.jsx(c,{variant:"overline",sx:{color:"#666",display:"block",mb:1,fontSize:"0.85rem"},children:"SENESTE KØB"}),e.jsxs(x,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(c,{variant:"h6",sx:{color:"#2c3e50",fontWeight:"bold"},children:n.lastPurchase.productName}),e.jsxs(x,{sx:{textAlign:"right"},children:[e.jsxs(c,{sx:{color:"#e74c3c",fontSize:"1.1rem",fontWeight:"bold"},children:[(R=n.lastPurchase.amount)==null?void 0:R.toFixed(2)," kr"]}),e.jsx(c,{sx:{color:"#666",fontSize:"0.9rem"},children:D(n.lastPurchase.timestamp)})]})]})]}),e.jsx(P,{container:!0,spacing:2,children:t.map(l=>e.jsx(P,{item:!0,xs:6,children:e.jsxs(O,{fullWidth:!0,variant:"contained",onClick:()=>C(l.id),sx:{bgcolor:"#e74c3c",py:2,borderRadius:2,fontSize:"1.1rem",fontWeight:"bold",boxShadow:"0 2px 8px rgba(231,76,60,0.3)",display:"flex",flexDirection:"column","&:hover":{bgcolor:"#c0392b",transform:"translateY(-2px)",boxShadow:"0 4px 12px rgba(231,76,60,0.4)"}},children:[e.jsx(x,{children:l.name}),e.jsxs(c,{variant:"body2",sx:{opacity:.9,fontSize:"0.9rem",fontWeight:"normal"},children:[l.price," kr"]})]})},l.id))})]}),e.jsx(x,{sx:{p:2,borderTop:"1px solid rgba(0,0,0,0.1)",bgcolor:"white"},children:e.jsx(A,{maxWidth:"sm",children:e.jsx(O,{fullWidth:!0,variant:"text",onClick:()=>a("/"),startIcon:e.jsx(ie,{}),sx:{color:"#666",py:1.5,fontSize:"1rem","&:hover":{bgcolor:"rgba(0,0,0,0.05)",color:"#2c3e50"}},children:"Tilbage til oversigt"})})})]})},N=y(A)({minHeight:"100vh",minWidth:"100vw",backgroundColor:"#ffffff",color:"#333333",display:"flex",flexDirection:"column",padding:"16px",margin:0,boxSizing:"border-box",overflow:"hidden"}),je=y(x)({display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 0",borderBottom:"1px solid #e0e0e0"}),Re=y(F)({"& .MuiInputBase-input":{color:"#333333",backgroundColor:"#f0f0f0",borderRadius:"4px",padding:"8px 12px"},"& .MuiInput-underline:before":{borderBottom:"none"},"& .MuiInput-underline:after":{borderBottom:"none"}}),Ae=y(O)({backgroundColor:"#5BB9FD",color:"white",padding:"16px",borderRadius:"8px",fontSize:"16px",textTransform:"none",marginTop:"20px",marginBottom:"20px","&:hover":{backgroundColor:"#4999d6"}}),W=y(T)({backgroundColor:"#f5f5f5",padding:"16px",borderRadius:"8px",marginBottom:"16px",boxShadow:"none",border:"1px solid #e0e0e0",flex:1,overflowY:"auto"}),H=y(c)({fontSize:"18px",fontWeight:500,marginBottom:"12px",color:"#333333"}),Pe=()=>{var m;const[o,a]=g.useState({occupantName:"",balance:0,lastPurchase:null,recentPurchases:[]}),[n,d]=g.useState(localStorage.getItem("selectedRoom")),[t,s]=g.useState([]),[i,u]=g.useState(!0),[h,C]=g.useState(null),D=r=>r?(r instanceof Date?r:r.toDate()).toLocaleString("da-DK",{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"2-digit"}):"";g.useEffect(()=>{(async()=>{if(n)try{u(!0),console.log("Loading data for room:",n);const p=await V(n);console.log("Room data loaded:",p);const b=v(f,"purchases"),w=Q(b,ce("roomId","==",n),le("timestamp","desc"),de(5)),X=await U(w),B=[];X.forEach(K=>{const L=K.data();B.push({id:K.id,...L,timestamp:L.timestamp})});const G={...p,recentPurchases:B};console.log("Updated room data:",G),a(G),s(B)}catch(p){console.error("Error loading data:",p),C(p)}finally{u(!1)}})()},[n]);const j=r=>{const p=r.target.value;d(p),localStorage.setItem("selectedRoom",p)},R=async()=>{const r=E(f,"adminConfig","general"),p=await S(r);if(p.exists()){const{mobilePayPhoneNumber:b}=p.data(),w=(o==null?void 0:o.balance)||0;window.location.href=`mobilepay://send?phone=${b}&amount=${w}&comment=Værelse ${n}`}},l=Array.from({length:28},(r,p)=>String(601+p));return n?i?e.jsx(N,{children:e.jsx(c,{variant:"body1",sx:{textAlign:"center",mt:4},children:"Indlæser..."})}):e.jsxs(N,{children:[e.jsxs(je,{children:[e.jsxs(c,{variant:"h6",sx:{color:"#333333"},children:["Værelse ",n]}),e.jsx(Re,{variant:"standard",placeholder:"Beboernavn",value:(o==null?void 0:o.occupantName)||"",disabled:!0})]}),e.jsxs(x,{sx:{textAlign:"center",my:2},children:[e.jsx(c,{variant:"body1",sx:{mb:1,color:"#666666"},children:"Samlet saldo:"}),e.jsxs(c,{variant:"h4",sx:{color:"#333333"},children:[((m=o==null?void 0:o.balance)==null?void 0:m.toFixed(2))||"0.00"," kr"]})]}),e.jsx(Ae,{fullWidth:!0,variant:"contained",onClick:R,disabled:!(o!=null&&o.balance),children:"Betal med MobilePay"}),e.jsxs(W,{children:[e.jsx(H,{children:"Seneste 5 køb"}),h&&e.jsxs(c,{variant:"body2",color:"error",children:["Fejl ved hentning af køb: ",h.message]}),t.length>0?t.map((r,p)=>e.jsxs(x,{sx:{mb:2,pb:2,borderBottom:p<t.length-1?"1px solid #e0e0e0":"none"},children:[e.jsxs(c,{variant:"body2",sx:{display:"flex",justifyContent:"space-between",color:"#333333"},children:[e.jsxs("span",{children:["Produkt: ",r.productName]}),e.jsxs("span",{children:["Pris: ",r.amount," kr"]})]}),r.timestamp&&e.jsx(c,{variant:"caption",sx:{display:"block",mt:.5,color:"#666666"},children:D(r.timestamp)})]},r.id)):e.jsx(c,{variant:"body2",sx:{color:"#666666"},children:"Ingen seneste køb"})]}),e.jsxs(W,{children:[e.jsx(H,{children:"Påmindelser"}),e.jsx(c,{variant:"body2",sx:{color:"#333333"},children:"Husk køkkenmøde - Torsdag d. 15. juni"})]})]}):e.jsx(N,{children:e.jsxs(x,{sx:{textAlign:"center",mt:4},children:[e.jsx(c,{variant:"h5",gutterBottom:!0,children:"Velkommen"}),e.jsx(c,{gutterBottom:!0,sx:{mb:3,color:"#666666"},children:"Vælg dit værelse for at fortsætte"}),e.jsxs(F,{select:!0,fullWidth:!0,label:"Værelse",onChange:j,SelectProps:{native:!0},sx:{backgroundColor:"#f0f0f0",borderRadius:"8px","& .MuiInputBase-input":{color:"#333333"},"& .MuiInputLabel-root":{color:"#666666"}},children:[e.jsx("option",{value:"",children:"Vælg værelse"}),l.map(r=>e.jsx("option",{value:r,children:r},r))]})]})})};function Te(){return e.jsx(me,{children:e.jsxs(pe,{children:[e.jsx(I,{path:"/PWAVIEW",element:e.jsx(Pe,{})}),e.jsxs(I,{path:"/",element:e.jsx(xe,{}),children:[e.jsx(I,{index:!0,element:e.jsx(Ee,{})}),e.jsx(I,{path:"room/:roomId",element:e.jsx(ve,{})})]}),e.jsx(I,{path:"*",element:e.jsx(ue,{to:"/",replace:!0})})]})})}ge(document.getElementById("root")).render(e.jsx(g.StrictMode,{children:e.jsx(Te,{})}));
